"use strict";(self.webpackChunkbackend=self.webpackChunkbackend||[]).push([[8107],{21289:(R,u,e)=>{e.d(u,{I:()=>t,U:()=>n});const t="strapi_stage",n="strapi_assignee"},56996:(R,u,e)=>{e.r(u),e.d(u,{InformationBoxEE:()=>Z});var t=e(67294),n=e(81252),o=e(50236),l=e(32156),a=e(75878),c=e(63122),r=e(78549),i=e(28809),d=e(85612),g=e(86896),m=e(88767),E=e(86706),f=e(21892),h=e(54920),S=e(36364),s=e(21289);function U(){const{initialData:L,layout:{uid:B},isSingleType:x,onChange:Y}=(0,n.Wq)(),Q=(0,E.v9)(S._),{formatMessage:T}=(0,g.Z)(),{formatAPIError:H}=(0,n.So)(),X=(0,n.lm)(),{put:b}=(0,n.kY)(),{allowedActions:{canReadUsers:k}}=(0,n.ss)({readUsers:Q.settings.users.read}),{users:K,isLoading:F,isError:G}=(0,h.R)({},{enabled:k}),w=L?.[s.U]??null,I=async({value:p})=>{O.mutate({entityId:L.id,assigneeId:parseInt(p,10),uid:B})},O=(0,m.useMutation)(async({entityId:p,assigneeId:V,uid:z})=>{const C=x?"single-types":"collection-types",{data:{data:W}}=await b(`/admin/content-manager/${C}/${z}/${p}/assignee`,{data:{id:V}});return Y({target:{name:s.U,value:W[s.U]}},!0),W},{onSuccess(){X({type:"success",message:{id:"content-manager.reviewWorkflows.assignee.notification.saved",defaultMessage:"Assignee updated"}})}});return t.createElement(l.g,{name:s.U,id:s.U},t.createElement(a.k,{direction:"column",gap:2,alignItems:"stretch"},t.createElement(c.hQ,{clearLabel:T({id:"content-manager.reviewWorkflows.assignee.clear",defaultMessage:"Clear assignee"}),error:G&&k&&T({id:"content-manager.reviewWorkflows.assignee.error",defaultMessage:"An error occurred while fetching users"})||O.error&&H(O.error),disabled:!F&&K.length===0,name:s.U,id:s.U,value:w?w.id:null,onChange:p=>I({value:p}),onClear:()=>I({value:null}),placeholder:T({id:"content-manager.reviewWorkflows.assignee.placeholder",defaultMessage:"Select \u2026"}),label:T({id:"content-manager.reviewWorkflows.assignee.label",defaultMessage:"Assignee"}),customizeContent:()=>t.createElement(a.k,{as:"span",justifyContent:"space-between",alignItems:"center",width:"100%"},t.createElement(r.Z,{textColor:"neutral800",ellipsis:!0},w?(0,f.Gf)(w,T):null),F||O.isLoading?t.createElement(i.a,{small:!0,style:{display:"flex"}}):null)},K.map(p=>t.createElement(d.O,{key:p.id,value:p.id,textValue:(0,f.Gf)(p,T)},(0,f.Gf)(p,T))))))}var M=e(47338),P=e(8595),D=e(75021),y=e(38705),A=e(86978),v=e(52258),N=e(5318);function $(){const{initialData:L,layout:{uid:B},isSingleType:x,onChange:Y}=(0,n.Wq)(),{put:Q}=(0,n.kY)(),{formatMessage:T}=(0,g.Z)(),{formatAPIError:H}=(0,n.So)(),X=(0,n.lm)(),{meta:b,workflows:[k],isLoading:K}=(0,v.n)({filters:{contentTypes:B}}),{getFeature:F}=(0,D.q)(),[G,w]=t.useState(!1),I=F("review-workflows"),O=L?.[s.I]??null,p=(0,m.useMutation)(async({entityId:C,stageId:W,uid:j})=>{const J=x?"single-types":"collection-types",{data:{data:_}}=await Q(`/admin/content-manager/${J}/${j}/${C}/stage`,{data:{id:W}});return Y({target:{name:s.I,value:_[s.I]}},!0),_},{onSuccess(){X({type:"success",message:{id:"content-manager.reviewWorkflows.stage.notification.saved",defaultMessage:"Review stage updated"}})}}),V=async({value:C})=>{try{I?.[A.Ef]&&parseInt(I[A.Ef],10)<b.workflowCount?w("workflow"):I?.[A._X]&&parseInt(I[A._X],10)<k.stages.length?w("stage"):p.mutateAsync({entityId:L.id,stageId:C,uid:B})}catch{}},{themeColorName:z}=O?.color?(0,N.k)(O?.color):{};return t.createElement(t.Fragment,null,t.createElement(l.g,{name:s.I,id:s.I},t.createElement(a.k,{direction:"column",gap:2,alignItems:"stretch"},t.createElement(M.q4,{error:p.error&&H(p.error)||null,name:s.I,id:s.I,value:O?.id,onChange:C=>V({value:C}),label:T({id:"content-manager.reviewWorkflows.stage.label",defaultMessage:"Review stage"}),startIcon:t.createElement(a.k,{as:"span",height:2,background:O?.color,borderColor:z==="neutral0"?"neutral150":"transparent",hasRadius:!0,shrink:0,width:2,marginRight:"-3px"}),customizeContent:()=>t.createElement(a.k,{as:"span",justifyContent:"space-between",alignItems:"center",width:"100%"},t.createElement(r.Z,{textColor:"neutral800",ellipsis:!0},O?.name),K?t.createElement(i.a,{small:!0,style:{display:"flex"}}):null)},k?k.stages.map(({id:C,color:W,name:j})=>{const{themeColorName:J}=(0,N.k)(W);return t.createElement(M.ag,{key:C,startIcon:t.createElement(a.k,{height:2,background:W,borderColor:J==="neutral0"?"neutral150":"transparent",hasRadius:!0,shrink:0,width:2}),value:C,textValue:j},j)}):[]),t.createElement(P.c,null))),t.createElement(y.fC,{isOpen:G==="workflow",onClose:()=>w(!1)},t.createElement(y.Dx,null,T({id:"content-manager.reviewWorkflows.workflows.limit.title",defaultMessage:"You\u2019ve reached the limit of workflows in your plan"})),t.createElement(y.uT,null,T({id:"content-manager.reviewWorkflows.workflows.limit.body",defaultMessage:"Delete a workflow or contact Sales to enable more workflows."}))),t.createElement(y.fC,{isOpen:G==="stage",onClose:()=>w(!1)},t.createElement(y.Dx,null,T({id:"content-manager.reviewWorkflows.stages.limit.title",defaultMessage:"You have reached the limit of stages for this workflow in your plan"})),t.createElement(y.uT,null,T({id:"content-manager.reviewWorkflows.stages.limit.body",defaultMessage:"Try deleting some stages or contact Sales to enable more stages."}))))}function Z(){const{isCreatingEntry:L,layout:{options:B}}=(0,n.Wq)(),x=B?.reviewWorkflows??!1;return t.createElement(o.d.Root,null,t.createElement(o.d.Title,null),x&&!L&&t.createElement(t.Fragment,null,t.createElement($,null),t.createElement(U,null)),t.createElement(o.d.Body,null))}},75021:(R,u,e)=>{e.d(u,{q:()=>l});var t=e(67294),n=e(81252),o=e(88767);function l({enabled:a}={enabled:!0}){const{get:c}=(0,n.kY)(),{data:r,isError:i,isLoading:d}=(0,o.useQuery)(["ee","license-limit-info"],async()=>{const{data:{data:E}}=await c("/admin/license-limit-information");return E},{enabled:a}),g=t.useMemo(()=>r??{},[r]),m=t.useCallback(E=>(g?.features??[]).find(h=>h.name===E)?.options??{},[g?.features]);return{license:g,getFeature:m,isError:i,isLoading:d}}},38705:(R,u,e)=>{e.d(u,{uT:()=>P,fC:()=>A,Dx:()=>M});var t=e(67294),n=e(78549),o=e(75878),l=e(60881),a=e(48683),c=e(50781),r=e(37527),i=e(94101),d=e(15800),g=e(45697),m=e.n(g),E=e(86896),f=e(88972);const h=e.p+"0cd5f8915b265d5b1856.png",S="limits-title",s="https://strapi.io/pricing-cloud",U="https://strapi.io/contact-sales";function M({children:v}){return t.createElement(n.Z,{variant:"alpha",id:S},v)}M.propTypes={children:m().node.isRequired};function P({children:v}){return t.createElement(n.Z,{variant:"omega"},v)}P.propTypes={children:m().node.isRequired};function D(){const{formatMessage:v}=(0,E.Z)();return t.createElement(o.k,{gap:2,paddingTop:4},t.createElement(i.Q,{variant:"default",isExternal:!0,href:s},v({id:"Settings.review-workflows.limit.cta.learn",defaultMessage:"Learn more"})),t.createElement(i.Q,{variant:"tertiary",isExternal:!0,href:U},v({id:"Settings.review-workflows.limit.cta.sales",defaultMessage:"Contact Sales"})))}const y=f.ZP.img`
  // Margin top|right reverse the padding of ModalBody
  margin-right: ${({theme:v})=>`-${v.spaces[7]}`};
  margin-top: ${({theme:v})=>`-${v.spaces[7]}`};
  width: 360px;
`;function A({children:v,isOpen:N,onClose:$}){const{formatMessage:Z}=(0,E.Z)();return N?t.createElement(l.P,{labelledBy:S},t.createElement(a.f,null,t.createElement(o.k,{gap:2,paddingLeft:7,position:"relative"},t.createElement(o.k,{alignItems:"start",direction:"column",gap:2,width:"60%"},v,t.createElement(D,null)),t.createElement(o.k,{justifyContent:"end",height:"100%",width:"40%"},t.createElement(y,{src:h,"aria-hidden":!0,alt:"",loading:"lazy"}),t.createElement(c.x,{display:"flex",position:"absolute",right:0,top:0},t.createElement(r.h,{icon:t.createElement(d.Z,null),"aria-label":Z({id:"global.close",defaultMessage:"Close"}),onClick:$})))))):null}A.defaultProps={isOpen:!1},A.propTypes={children:m().node.isRequired,isOpen:m().bool,onClose:m().func.isRequired}},86978:(R,u,e)=>{e.d(u,{$k:()=>i,Ef:()=>f,FT:()=>m,Nj:()=>r,Ot:()=>c,VS:()=>d,_X:()=>h,gu:()=>o,lv:()=>g,qZ:()=>l,sN:()=>n,uL:()=>E,x4:()=>a});var t=e(20468);const n="settings_review-workflows",o="Settings/Review_Workflows/RESET_WORKFLOW",l="Settings/Review_Workflows/SET_WORKFLOW",a="Settings/Review_Workflows/WORKFLOW_DELETE_STAGE",c="Settings/Review_Workflows/WORKFLOW_ADD_STAGE",r="Settings/Review_Workflows/WORKFLOW_UPDATE_STAGE",i="Settings/Review_Workflows/WORKFLOW_UPDATE_STAGE_POSITION",d="Settings/Review_Workflows/WORKFLOW_UPDATE",g={primary600:"Blue",primary200:"Lilac",alternative600:"Violet",alternative200:"Lavender",success600:"Green",success200:"Pale Green",danger500:"Cherry",danger200:"Pink",warning600:"Orange",warning200:"Yellow",secondary600:"Teal",secondary200:"Baby Blue",neutral400:"Gray",neutral0:"White"},m=t.W.colors.primary600,E={STAGE:"stage"},f="numberOfWorkflows",h="stagesPerWorkflow"},52258:(R,u,e)=>{e.d(u,{n:()=>o});var t=e(81252),n=e(88767);function o(l={}){const{get:a}=(0,t.kY)(),{id:c="",...r}=l,i={populate:"stages"},{data:d,isLoading:g,status:m,refetch:E}=(0,n.useQuery)(["review-workflows","workflows",c],async()=>(await a(`/admin/review-workflows/workflows/${c}`,{params:{...i,...r}})).data);let f=[];return c&&d?.data?f=[d.data]:Array.isArray(d?.data)&&(f=d.data),{meta:d?.meta??{},workflows:f,isLoading:g,status:m,refetch:E}}},5318:(R,u,e)=>{e.d(u,{k:()=>o,s:()=>l});var t=e(20468),n=e(86978);function o(a){if(!a)return null;const r=Object.entries(t.W.colors).filter(([,i])=>i.toUpperCase()===a.toUpperCase()).reduce((i,[d])=>(n.lv?.[d]&&(i=d),i),null);return r?{themeColorName:r,name:n.lv[r]}:null}function l(){return Object.entries(n.lv).map(([a,c])=>({hex:t.W.colors[a].toUpperCase(),name:c}))}},94101:(R,u,e)=>{e.d(u,{Q:()=>g});var t=e(85893),n=e(67294),o=e(88972),l=e(62485),a=e(20501),c=e(53342),r=e(96987),i=e(10574);const d=(0,o.ZP)(a.G)`
  text-decoration: none;

  &[aria-disabled='true'] {
    ${l.sg}
    &:active {
      ${l.sg}
    }
  }

  &:hover {
    ${l.yP}
  }

  &:active {
    ${l.tB}
  }

  ${l.PD}
`,g=n.forwardRef(({variant:m="default",startIcon:E,endIcon:f,disabled:h=!1,children:S,size:s="S",as:U=c.f,...M},P)=>{const D=s==="S"?2:"10px",y=4;return(0,t.jsxs)(d,{ref:P,"aria-disabled":h,size:s,variant:m,background:"buttonPrimary600",borderColor:"buttonPrimary600",hasRadius:!0,gap:2,inline:!0,paddingBottom:D,paddingLeft:y,paddingRight:y,paddingTop:D,pointerEvents:h?"none":void 0,...M,as:U||c.f,children:[E&&(0,t.jsx)(r.k,{"aria-hidden":!0,children:E}),(0,t.jsx)(i.Z,{variant:s==="S"?"pi":void 0,fontWeight:"bold",textColor:"buttonNeutral0",children:S}),f&&(0,t.jsx)(r.k,{"aria-hidden":!0,children:f})]})});g.displayName="LinkButton"}}]);
